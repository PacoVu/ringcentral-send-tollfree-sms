<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RingCentral High Volume SMS</title>
    <link href="./img/favicon.ico" type="image/vnd.microsoft.icon" rel="shortcut icon">
    <link href="./img/favicon.ico" type="image/vnd.microsoft.icon" rel="icon">
    <script src="js/common.js" type="text/javascript"></script>
    <script src="js/template.js" type="text/javascript"></script>

    <script src="js/jquery-3.1.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.3/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.3/js/bootstrap-select.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/js/bootstrap-dialog.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/css/bootstrap-dialog.min.css">

    <script>
      window.batchResult = '<%- JSON.stringify(batchResult) %>'
    </script>

</head>
<body>
  <div id="hidden-div-feedback" style="display: none">
    <form id="send_feedback_form">
        <span class="control-label">How was your experience?</span>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="positive" checked/>
            <img src="./img/positive.png">
          </label>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="neutral"/>
            <img src="./img/neutral.png">
          </label>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="negative"/>
            <img src="./img/negative.png">
          </label>
        </br></br>
        <div>
          <textarea id="free_text" cols=70 rows="5" placeholder="Describe your experience here..."></textarea>
        </div>
        <span>Type: </span>
        <select class="selectpicker filter-select" id="feedback_type">
          <option value="Bug report" selected>Bug</option>
          <option value="Suggestion">Suggestion</option>
          <option value="Others">Others</option>
        </select>
      <!--div class="form-group"></div-->
    </form>
  </div>

  <nav id="menu_header" class="navbar navbar-default no-border">
    <span class="left-middle-align">
      <span class="rclogo"><a href="/"><img alt="Brand" src="img/ringcentral.png" height="40"></a></span>&nbsp;&nbsp;
      <span class="title">High Volume SMS</span>
    </span>
    <ul class="nav navbar-nav navbar-left left-align-nav">
      <li><a href="/campaign">My Campaigns</a></li>
      <li><a href="/message-store">My Message Store</a></li>
      <!--li class="active"><a>Send High Volume SMS</a></li-->
      <li class="dropdown active">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Send High Volume SMS <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/highvolume-manual">Manual Input</a></li>
          <li><a href="/highvolume-template">Template Input</a></li>
        </ul>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right middle-align">
      <li><span>Hi <b><%- userName %></b></span></li>&nbsp;&nbsp;
      <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Contact us <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="javascript:openWindow()">Report Issues</a></li>
          <li><a href="javascript:openFeedbackForm()">Feedback</a></li>
        </ul>
      </li>
      <!--
      <li><a href="javascript:openWindow()">Report Issues</a></li>
      <li><span>|</span></li>
      <li><a href="javascript:openFeedbackForm()">Feedback</a></li>
      -->
      <li><span>|</span></li>
      <li><a href="/about">Help</a></li>
      <li><span>|</span></li>
      <li><a href="#" onclick="logout()">Logout</a></li>
    </ul>
  </nav>
  <section id='content'>
    <div class="row col-xs-12">
      <div class="col-sm-2">
        <!--
        <div>&#9744; <a href="/highvolume-manual">Manual Input</a></div>
        <div>&#9745; Template Input</div>
        -->
      </div>
      <div class="col-sm-7">
        <div class="form-inline">
          <form id="sms-form" class="form-group" enctype="multipart/form-data">
            <div class="block_space">
              <label class="label-input">Campaign Name</label>
              <input type="text" id="campaign_name" class="form-control text-input" name="campaign_name"></input>
            </div>
            <div class="block_space">
              <label class="label-input">From number</label>
              <select size="20" id="from_number" name="from_number" class="selectpicker filter-select">
                <% for (var item of phoneNumbers) { %>
                  <option value="<%- item.number %>"><%= item.format %> - <%= item.type %></option>
                <% } %>
              </select>&nbsp;&nbsp;
            </div>

            <div class="block_space">
              <label class="label-input">CSV file</label>
              <input type="file" id="attachment" name="attachment" class="form-control" onchange="readFileRecipients(this, null)"></input>
            </div>
            <div class="block_space">
              <label class="label-input">CSV columns:</label>
              <div id="columns" class="form-control">-</div>
            </div>
            <div class="block_space">
              <label class="label-input">Recipient's number column</label>
              <!--span>From number</span>
              <input type="text" id="from-number-column" name="from_number_column" class="form-control" value="fromNumber"></input>
              <span>To Number</span-->
              <input type="text" id="to-number-column" name="to_number_column" class="form-control" placeholder="enter column name"></input>
            </div>

            <hr style="margin: 2px !important"></hr>

            <div class="block_space">
              <label class="label-input" for="message" title="Click a column name above to fill the message.">Message &#9432;</label>
              <textarea rows="3" cols="60" id="message" name="message" oninput="updateSampleMessage()" class="form-control text-input"></textarea>
            </div>
            <div class="block_space">
              <label class="label-input">Sample message</br><div class="char-count" id="charcount">SMS length: 0 char.</div></label>
              <textarea rows="3" cols="60" id="sample" readonly class="form-control text-input"></textarea>
            </div>
            <hr style="margin: 2px !important"></hr>
            <div class="block-space">
              <label class="warning">Estimated cost:</label>
              <span class="cost warning" id="estimated_cost"> $0.000 USD *</span>
              <div class="claimed">* Estimates are for educational purposes only and may not include all message fees, such as fees for international SMS.<br/>The actual cost for sending these messages may be higher or lower.</div>
            </div>
            <hr style="margin: 2px !important"></hr>
            <button id="submit" type="submit" class="form-control btn-rc" onclick="sendBatchMessage(event)">Submit</button>
          </form>
        </div>
      </div>

      <div class="col-sm-3" style="border-left: 1px dotted gray">
        <div id="control_block" style="display: none;">
          <button id="read_result" onclick="switchPollResult()" class="btn-rc">Stop Polling</button>&nbsp;&nbsp;
          <button id="read_report" onclick="readReport()" class="btn-rc">Read Report</button>
          </br>
          <div id="result_block" style="margin-top:20px;display: none">
            <span style="height:50px;margin-bottom:10px"><b>Send SMS progress</b><span id="polling_tips"> (Update every 5 secs!)</span></span>&nbsp;&nbsp;
            <img src='./img/sendprogress.gif' id="sendingAni" style='width:30px;height:20px;display: none'></img>
            <div id="time"></div>
            <div id="status"></div>
            <div id="result"></div>
          </div>
          <div id="report_block" style="margin-top:20px;display: none">
            <span><b>Report</b></span>
            <div id="report">Reading report ...</div>
            </br>
            <div class="block_space" id="downloads">
              <a href="javascript:downloadReport('')">Download Detailed Report</a>
              <a id="download_json" href="javascript:downloadReport('JSON')" style="display: none">Download Detailed Report (JSON)</a>
              <a id="download_csv" href="javascript:downloadReport('CSV')" style="display: none">Download Detailed Report (CSV)</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <%- include('_footer') %>
</body>
</html>
