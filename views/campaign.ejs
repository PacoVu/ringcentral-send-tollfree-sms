<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RingCentral High Volume SMS</title>
    <link href="./img/favicon.ico" type="image/vnd.microsoft.icon" rel="shortcut icon">
    <link href="./img/favicon.ico" type="image/vnd.microsoft.icon" rel="icon">
    <script src="js/common.js" type="text/javascript"></script>
    <script src="js/campaign.js" type="text/javascript"></script>

    <script src="js/jquery-3.1.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.3/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.3/js/bootstrap-select.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/js/bootstrap-dialog.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/css/bootstrap-dialog.min.css">

</head>
<body onload="init()">
  <div id="hidden-div-feedback" style="display: none">
    <form id="send_feedback_form">
        <span class="control-label">How was your experience?</span>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="positive" checked/>
            <img src="./img/positive.png">
          </label>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="neutral"/>
            <img src="./img/neutral.png">
          </label>
          &nbsp;&nbsp;
          <label>
            <input type="radio" name="emoji" value="negative"/>
            <img src="./img/negative.png">
          </label>
        </br></br>
        <div>
          <textarea id="free_text" cols=70 rows="5" placeholder="Describe your experience here..."></textarea>
        </div>
        <span>Type: </span>
        <select class="selectpicker filter-select" id="feedback_type">
          <option value="Bug report" selected>Bug</option>
          <option value="Suggestion">Suggestion</option>
          <option value="Others">Others</option>
        </select>
      <!--div class="form-group"></div-->
    </form>
  </div>

  <nav id="menu_header" class="navbar navbar-default no-border">
    <span class="left-middle-align">
      <span class="rclogo"><a href="/"><img alt="Brand" src="img/ringcentral.png" height="40"></a></span>&nbsp;&nbsp;
      <span class="title">My Campaigns</span>
    </span>
    <ul class="nav navbar-nav navbar-left middle-align">
      <li>
        <span><a href="/highvolume-manual"><b>Send High Volume SMS</b></a></span>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right middle-align">
      <li><span><b><%- userName %></b></span></li>&nbsp;&nbsp;
      <!--li><span>|</span></li-->
      <li><a href="javascript:openWindow()">Report Issues</a></li>
      <li><span>|</span></li>
      <li><a href="javascript:openFeedbackForm()">Feedback</a></li>
      <li><span>|</span></li>
      <li><a href="/about">Help</a></li>
      <li><span>|</span></li>
      <li><a href="#" onclick="logout()">Logout</a></li>
    </ul>
  </nav>
  <section id='content'>
    <div id="content_header" class="row col-xs-12">
      <div class="col-sm-6">
        <div class="form-inline">
          <label class="label-input">Campaign Name</label>
          <select size="20" id="campaigns" class="selectpicker filter-select">
            <% var timeOffset = new Date().getTimezoneOffset()*60000; %>
            <% let dateOptions = { weekday: 'short' } %>
            <% let timeOptions = { hour: '2-digit',minute: '2-digit' } %>
            <% for (var item of campaigns) { %>
            <% var date = new Date(item.creationTime) %>
            <% var timestamp = date.getTime() - timeOffset %>
            <% date = new Date (timestamp) %>
            <% var dateStr = date.toLocaleDateString("en-US") %>
            <% dateStr += " " + date.toLocaleTimeString("en-US", {hour: '2-digit',minute: '2-digit', timeZone: 'UTC'}) %>
            <option value="<%- item.batchId %>/<%- item.creationTime %>"><%= item.campaign %> - <%= dateStr %></option>
            <% } %>
          </select>
          <button class="form-control btn-rc" style="display: inline" onclick="readCampaign()">Read</button>
        </div>
      </div>
      <div class="col-sm-6"></div>
    </div>
    <hr style="margin: 2px !important"></hr>
    <div id='campaign-report' class="row col-xs-12" style="margin-top:20px; display:block;">
      <div class="col-sm-3">
        <label>Campaign Summany:</label>
        <div id="report" style="margin-top:10px;"></div>
        <div class="block_space" id="downloads">
          <hr style="margin: 2px !important"></hr>
          <a id="download_csv" href="javascript:downloadReport('CSV')" style="display: none">Download Campaign Full Report (CSV)</a>
          <a id="download_json" href="javascript:downloadReport('JSON')" style="display: none">Download Campaign Full Report (JSON)</a>
        </div>
      </div>
      <div class="col-sm-9" style="border-left: 1px dotted gray">
        <div class="row col-xs-12">
        <div class="row col-xs-12">
          <div class="col-sm-1 hasborder">Id</div>
          <div class="col-sm-2 hasborder">From</div>
          <div class="col-sm-2 hasborder">To</div>
          <!--div class="col-sm-2 hasborder">Created</div-->
          <div class="col-sm-2 hasborder">Last Updated</div>
          <div class="col-sm-1 hasborder">Status</div>
          <div class="col-sm-2 hasborder">Error Code</div>
          <div class="col-sm-1 hasborder">Cost (USD)</div>
          <div class="col-sm-1 hasborder">Segment</div>
        </div></div>
        <div id="list" class="row col-xs-12"></div>
      </div>
    </div>
  </section>
  <%- include('_footer') %>
</body>
</html>
